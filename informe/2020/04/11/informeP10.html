<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Informe Reto P10 | Reto P10 Lexer Generator</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Informe Reto P10" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introducción El documento que ante usted se presenta, explica y detalla los aspectos fundamentales de la práctica realizada. La práctica en sí, está dirigida al desarrollo de una acción de GitHub extremadamente básica." />
<meta property="og:description" content="Introducción El documento que ante usted se presenta, explica y detalla los aspectos fundamentales de la práctica realizada. La práctica en sí, está dirigida al desarrollo de una acción de GitHub extremadamente básica." />
<link rel="canonical" href="/hello-js-super-alu0101100654/informe/2020/04/11/informeP10.html" />
<meta property="og:url" content="/hello-js-super-alu0101100654/informe/2020/04/11/informeP10.html" />
<meta property="og:site_name" content="Reto P10 Lexer Generator" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-11T17:49:47+01:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Informe Reto P10","dateModified":"2020-04-11T17:49:47+01:00","datePublished":"2020-04-11T17:49:47+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"/hello-js-super-alu0101100654/informe/2020/04/11/informeP10.html"},"url":"/hello-js-super-alu0101100654/informe/2020/04/11/informeP10.html","description":"Introducción El documento que ante usted se presenta, explica y detalla los aspectos fundamentales de la práctica realizada. La práctica en sí, está dirigida al desarrollo de una acción de GitHub extremadamente básica.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/hello-js-super-alu0101100654/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/hello-js-super-alu0101100654/feed.xml" title="Reto P10 Lexer Generator" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/hello-js-super-alu0101100654/">Reto P10 Lexer Generator</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Informe Reto P10</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-04-11T17:49:47+01:00" itemprop="datePublished">Apr 11, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="introducción">Introducción</h2>
<p>El documento que ante usted se presenta, explica y detalla los aspectos fundamentales de la práctica realizada. La práctica en sí, está dirigida al desarrollo de una <strong>acción</strong> de GitHub extremadamente básica.</p>

<h2 id="recursos-iniciales">Recursos iniciales</h2>
<p>Como puede resultar lógico, es imposible desarrollar una <strong>acción</strong> de GitHub si no se posee una cuenta registrada en el servicio web. De igual manera, se requiere la creación de un repositorio específico para alojar la acción desarrollada. Estos son, en principio, los únicos requisitos realmente fundamentales para poder desarrollar una <strong>acción</strong>. Si va a trabajar con <strong>JS</strong>, puede que le resulte de interés definir también un <strong>package.json</strong>.</p>

<p>A la hora de crear el repositorio, es muy importante que su acceso se defina como <strong>público</strong>. Si se define como <strong>privado</strong>, ningún otro repositorio podría utilizar la <strong>acción</strong> desarrollada, por lo que la utilidad de la misma sería estrictamente local.</p>

<h2 id="desarrollo-de-la-acción">Desarrollo de la acción</h2>
<p>Las acciones se deben desarrollar en un fichero con extensión <strong>yml</strong> y pueden posicionarse sin ningún tipo de problema en la raíz del repositorio. La acción a desarrollar debe tener campos que especifiquen los siguientes elementos:</p>
<ul>
  <li>Nombre.</li>
  <li>Descripción.</li>
  <li>Entradas (inputs) que requiere la acción.
    <ul>
      <li>Descripción de las entradas.</li>
      <li>Valor por defecto (De haberlo).</li>
      <li>Si se requiere o no (required).</li>
    </ul>
  </li>
  <li>Salidas (outputs) de la acción.
    <ul>
      <li>Descripción de la salida.</li>
    </ul>
  </li>
  <li>Los programas que ejecuta (runs).
    <ul>
      <li>Qué utiliza para ejecuarlos (using).</li>
      <li>El nombre del programa (main).</li>
    </ul>
  </li>
</ul>

<p>La acción que se ha desarrollado se trata de una cuya única función es imprimir un <em>“Hola Mundo”</em> por la consola, y además, mostrar la hora en la que se produjo el saludo. El código de dicha acción, es el siguiente:</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Hello</span><span class="nv"> </span><span class="s">World'</span>
<span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Greet</span><span class="nv"> </span><span class="s">someone</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">record</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">time'</span>
<span class="na">inputs</span><span class="pi">:</span>
  <span class="na">who-to-greet</span><span class="pi">:</span>  <span class="c1"># id of input</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Who</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">greet'</span>
    <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">default</span><span class="pi">:</span> <span class="s1">'</span><span class="s">World'</span>
<span class="na">outputs</span><span class="pi">:</span>
  <span class="na">time</span><span class="pi">:</span> <span class="c1"># id of output</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">The</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">we</span><span class="nv"> </span><span class="s">greeted</span><span class="nv"> </span><span class="s">you'</span>
<span class="na">runs</span><span class="pi">:</span>
  <span class="na">using</span><span class="pi">:</span> <span class="s1">'</span><span class="s">node12'</span>
  <span class="na">main</span><span class="pi">:</span> <span class="s1">'</span><span class="s">./dist/index.js'</span></code></pre></figure>

<h2 id="escribir-el-código-de-la-acción">Escribir el código de la acción</h2>
<p>El código de la <strong>acción</strong> es, sencillamente, el código de los programas que esta ejecuta (aquellos especificados en la sección <code class="highlighter-rouge">runs</code>) y, por lo general, se elaboran en <strong><em>JS</em></strong>, más concretamente, en <strong><em>NodeJS</em></strong>. 
El código se puede elaborar de la manera que el usario/desarrollador prefiera, pero es importante que, en el proceso, se usen las herramientas de desarrollo para acciones disponibles para <strong><em>NodeJS</em></strong>. Estas herramientas, que en la práctica se corresponden con una serie de módulos que deben ser incluídos en el fichero con el código fuente, permiten controlar la entrada y salida de las acciones entre otras tareas, como pueden ser aquellas relacionadas a la generación de mensajes de debug.
Para instalar estas herramientas, se deben utilizar los siguientes comandos.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">npm <span class="nb">install</span> @actions/core
npm <span class="nb">install</span> @actions/github</code></pre></figure>

<p>Existen muchas maneras de poder utilizar estas herramientas. Para el código de la acción desarrollada, se han usado para controlar la entrada y salida de la acción.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">const</span> <span class="nx">core</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@actions/core</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">github</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@actions/github</span><span class="dl">'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="c1">// `who-to-greet` input defined in action metadata file</span>
  <span class="kd">const</span> <span class="nx">nameToGreet</span> <span class="o">=</span> <span class="nx">core</span><span class="p">.</span><span class="nx">getInput</span><span class="p">(</span><span class="dl">'</span><span class="s1">who-to-greet</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Hello </span><span class="p">${</span><span class="nx">nameToGreet</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">time</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">toTimeString</span><span class="p">();</span>
  <span class="nx">core</span><span class="p">.</span><span class="nx">setOutput</span><span class="p">(</span><span class="dl">"</span><span class="s2">time</span><span class="dl">"</span><span class="p">,</span> <span class="nx">time</span><span class="p">);</span>
  <span class="c1">// Get the JSON webhook payload for the event that triggered the workflow</span>
  <span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">github</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">payload</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`The event payload: </span><span class="p">${</span><span class="nx">payload</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">core</span><span class="p">.</span><span class="nx">setFailed</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Como se puede comprobar y tal como se mencionó anteriormente, se han usando estas herramienta para controlar la entrada (<code class="highlighter-rouge"> const nameToGreet = core.getInput('who-to-greet')</code>) y salida (<code class="highlighter-rouge">core.setOutput("time", time)</code>) de la acción. También se han utilizado para control de errores (<code class="highlighter-rouge">core.setFailed(error.message)</code>) y para obtener la carga útil del evento disparador (<code class="highlighter-rouge">const payload = JSON.stringify(github.context.payload, undefined, 2)</code>).</p>

<p>Además del código de los programas en los que se basa la <strong>acción</strong>, es también recomendable redactar un <strong><em>README.md</em></strong> que explique a los usuarios el funcionamiento de la <strong>acción</strong> desarrollada y, en especial, como esta sebe ser utilizada.</p>

<h2 id="subir-la-acción-a-github">Subir la acción a GitHub</h2>
<p>Para que <strong>acción</strong> puede ser utilizada, simplemente debe ser “empujada” a GitHub. No obstante, es importante que junto al <strong>yml</strong> de la acción se suba también el código fuente que ejecuta y las dependencias de este, usualmente, el directorio <strong>node_modules</strong>. Si no se desea subir este directorio, una alternativa consiste en crear un nuevo fichero <strong>JS</strong> que contenga las definiciones necesarias para no recurrir a dependencia alguna. Es decir, que posea en su extensión el código de los módulos establecidos en <strong>node_modules</strong>. Esto se puede hacer muy fácilmente a través de la herramienta <strong>zeit/ncc</strong>, un módulo de <strong>NodeJS</strong>. Si decide utilizarse, debe especificarse en el <strong>yml</strong> de la acción el nuevo fichero <strong>JS</strong> generado tras su uso en lugar del previo. Por lo general, este se puede encontrar en el directorio <code class="highlighter-rouge">dist</code> que se crea tras compilar con <code class="highlighter-rouge">ncc</code>.</p>

<h2 id="probar-la-acción">Probar la acción</h2>
<p>Ahora que la acción se encuentra en los repositorios de GitHub, esta puede ser utilizada sin ningún tipo de problema. No obstante, resulta apropiado asegurarse de su correcto funcionamiento. Para ello, basta con, en otro repo, intentar utilizar la acción. Si lo logramos, entonces la acción es perfectamente funcional.</p>

<p>Para poder utilizar una acción en un repositorio, debe crearse un archivo <strong>yml</strong> en el directorio <code class="highlighter-rouge">.github/workflows</code> (si no existe, crearlo). El contenido de este fichero es distinto al anteriormente definido. La principal diferencia radica en la necesidad de indicar el evento que hará que se ejecuten las acciones/comandos especificados. Por lo general, suele utilizarse el evento <code class="highlighter-rouge">push</code>, que actua cuando se produce tal acción. En este fichero, no se definen acciones al uso, sino más bien <strong>trabajos</strong> que deben ser realizados. Estos trabajos se dividen en tareas que, en esencia, pueden ser de dos tipos:</p>
<ul>
  <li>Comandos.</li>
  <li>Acciones.
Para el segundo caso, que es el que nos atañe, se debe especificar de dónde se puede obtener la acción a ejecutar, así como los argumentos de entrada de la misma. Adicionalmente, y teniendo en cuenta que para gestionar este proceso GitHub construye una máquina virtual, debe especificarse la distribución de Linux a utilzar (entre las disponibles), así como los módulos a instalar (si fuera necesario), cuestión que, cuando se trata de acciones, no suele suceder o ser necesaria.
Para la <strong>acción</strong> desarrollada, se ha creado el siguiente <strong>yml</strong> para ponerla a prueba:</li>
</ul>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">name</span><span class="pi">:</span> <span class="s">Using hello world</span>
<span class="na">on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">push</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">hello_world_job</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">A job to say hello</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># To use this repository's private action, you must check out the repository</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Hello world action step</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">ULL-ESIT-PL-1920/hello-js-action-alu0101100654@v2.1</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">hello</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">who-to-greet</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Florentín</span><span class="nv"> </span><span class="s">Pérez'</span>
      <span class="c1"># Use the output from the `hello` step</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get the output time</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">echo "The time was $"</span></code></pre></figure>

<p>El resultado de la ejecución puede ser comprobado en la sección <code class="highlighter-rouge">Àctions</code> del repositorio de GitHub correspondiente. Si no ha habido fallo alguno, entonces el proceso ha sido satisfactorio.</p>

  </div><a class="u-url" href="/hello-js-super-alu0101100654/informe/2020/04/11/informeP10.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/hello-js-super-alu0101100654/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Reto P10 Lexer Generator</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Reto P10 Lexer Generator</li><li><a class="u-email" href="mailto:alu0101100654@ull.edu.es">alu0101100654@ull.edu.es</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/alu0101100654"><svg class="svg-icon"><use xlink:href="/hello-js-super-alu0101100654/assets/minima-social-icons.svg#github"></use></svg> <span class="username">alu0101100654</span></a></li><li><a href="https://www.twitter.com/"><svg class="svg-icon"><use xlink:href="/hello-js-super-alu0101100654/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username"></span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Informe del reto de la práctica 10.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
